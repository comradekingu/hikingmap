<Style name="symbols-landmarks">
  <Rule>
    &maxscale_zoom14;
    <Filter>[building]='cabin' and not ([access]='permissive' or [access]='public' or [access]='emergency' or [access]='yes' or [service]='self' or [service]='no')</Filter>
    <PointSymbolizer file="&symbols;/building.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>([man_made]='tower' and not [tourism]='viewpoint') or [man_made]='mast' or [amenity]='hunting_stand' or [man_made]='lighthouse' or [man_made]='windmill' or [man_made]='power_wind' or ([power]='generator' and [power_source] = 'wind')</Filter>
    <PointSymbolizer file="&symbols;/tower.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>[man_made]='cairn' or [historic]='monument' or [historic]='memorial'</Filter>
    <PointSymbolizer file="&symbols;/cairn.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom16;
    <Filter>[barrier]='gate' or [barrier]='lift_gate' or [barrier]='bollard' or [barrier]='cycle_barrier' or [barrier]='block' or [barrier]='chain'</Filter>
    <PointSymbolizer file="&symbols;/gate.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>[natural]='tree'</Filter>
    <PointSymbolizer file="&symbols;/tree.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom15;
    <Filter>[natural]='stone'</Filter>
    <PointSymbolizer file="&symbols;/stone.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>[historic]='ruins'</Filter>
    <PointSymbolizer file="&symbols;/ruin.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    &minscale_zoom16;
    <Filter>[natural]='peak' or [man_made]='survey_point'</Filter>
    <PointSymbolizer file="&symbols;/peak.png"/>
  </Rule>
</Style>

<Style name="symbols-sights">
  <Rule>
    &maxscale_zoom14;
    <Filter>[natural]='cave_entrance'</Filter>
    <PointSymbolizer file="&symbols;/cave.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>[man_made]='mineshaft' and ([access]='public' or [access]='')</Filter>
    <PointSymbolizer file="&symbols;/mine.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>[waterway]='waterfall'</Filter>
    <PointSymbolizer file="&symbols;/waterfall.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom13;
    <Filter>[tourism]='viewpoint' and not ([man_made]='tower')</Filter>
    <PointSymbolizer file="&symbols;/viewpoint.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom13;
    <Filter>[tourism]='viewpoint' and [man_made]='tower'</Filter>
    <PointSymbolizer file="&symbols;/viewtower.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>[amenity]='place_of_worship' and not ([hiking]='yes')</Filter>
    <PointSymbolizer file="&symbols;/church.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom12;
    <Filter>[amenity]='place_of_worship' and [hiking]='yes'</Filter>
    <PointSymbolizer file="&symbols;/sportschapel.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom15;
    <Filter>[historic]='archaeological_site' or [historic]='yes'</Filter>
    <PointSymbolizer file="&symbols;/relic.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>[natural]='beach'</Filter>
    <PointSymbolizer file="&symbols;/beach.png"/>
  </Rule>
</Style>

<Style name="symbols-trailheads">
  <Rule>
    &maxscale_zoom13;
    <Filter>[amenity]='parking' and [hiking]='yes'</Filter>
    <PointSymbolizer file="&symbols;/parking.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom15;
    <Filter>[amenity]='parking' and not ([access]='private')</Filter>
    <PointSymbolizer file="&symbols;/parking.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom13;
    <Filter>[railway]='station'</Filter>
    <PointSymbolizer file="&symbols;/railwaystation.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>[railway]='halt'</Filter>
    <PointSymbolizer file="&symbols;/railwaystation.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom15;
    <Filter>[railway]='tram_stop'</Filter>
    <PointSymbolizer file="&symbols;/tram.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom15;
    <Filter>[highway]='bus_stop' or [amenity]='bus_station'</Filter>
    <PointSymbolizer file="&symbols;/bus.png"/>
  </Rule>
</Style>

<Style name="symbols-cabins">
  <Rule>
    &maxscale_zoom7;
    <Filter>[tourism]='alpine_hut' or ([tourism]='guest_house' or [tourism]='hostel' or [tourism]='hotel') and [operator]='Den Norske Turistforening'</Filter>
    <PointSymbolizer file="&symbols;/cabin-staffedlodge.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom8;
    <Filter>[tourism]='cabin' and [service]='self'</Filter>
    <PointSymbolizer file="&symbols;/cabin-selfservice.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom10;
    <Filter>[tourism]='cabin' and [service]='no'</Filter>
    <PointSymbolizer file="&symbols;/cabin-unprovisioned.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom11;
    <Filter>(([building]='cabin' or [tourism]='cabin') and ([access]='permissive' or [access]='public' or [access]='emergency' or [access]='yes')) or [tourism]='basic_hut' or [tourism]='wilderness_hut'</Filter>
    <PointSymbolizer file="&symbols;/shelter.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom13;
    <Filter>[tourism]='lean_to' or [amenity]='shelter'</Filter>
    <PointSymbolizer file="&symbols;/leanto.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom12;
    <Filter>[tourism]='hotel' and [hiking]='yes'</Filter>
    <PointSymbolizer file="&symbols;/hotel.png"/>
  </Rule>
</Style>

<Style name="symbols-eating">
  <Rule>
    &maxscale_zoom12;
    <Filter>[amenity]='cafe'</Filter>
    <PointSymbolizer file="&symbols;/cafe.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom15;
    <Filter>[leisure]='firepit' or [amenity]='bbq'</Filter>
    <PointSymbolizer file="&symbols;/fireplace.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom15;
    <Filter>[leisure]='picnic_table' or [tourism]='picnic_site'</Filter>
    <PointSymbolizer file="&symbols;/picnicsite.png"/>
  </Rule>
</Style>

<Style name="symbols-signs">
  <Rule>
    &maxscale_zoom15;
    <Filter>[tourism]='information' and [information]='map' and ([hiking]='yes' or [ski]='yes')</Filter>
    <PointSymbolizer file="&symbols;/information.png"/>
  </Rule>
  <Rule>
    &maxscale_zoom16;
    <Filter>[tourism]='information' and [information]='guidepost'</Filter>
    <PointSymbolizer file="&symbols;/signpost.png"/>
  </Rule>
</Style>

<Style name="symbols-text">
  <Rule>
    &maxscale_zoom7;
    <Filter>[tourism]='alpine_hut' or ([tourism]='guest_house' or [tourism]='hostel' or [tourism]='hotel') and [operator]='Den Norske Turistforening'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom8;
    <Filter>[tourism]='cabin' and [service]='self'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom10;
    <Filter>[tourism]='cabin' and [service]='no'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom11;
    <Filter>(([building]='cabin' or [tourism]='cabin') and ([access]='permissive' or [access]='public' or [access]='emergency' or [access]='yes')) or [tourism]='basic_hut' or [tourism]='wilderness_hut'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom16;
    <Filter>([tourism]='alpine_hut' or [tourism]='cabin') and [operator]!=''</Filter>
    <TextSymbolizer name="operator" fontset_name="book-fonts" size="8"
      fill="&grey50;" dy="20" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom13;
    <Filter>[amenity]='place_of_worship' and [hiking]='yes'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom12;
    <Filter>[amenity]='cafe'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom13;
    <Filter>[railway]='station'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>[railway]='halt'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom15;
    <Filter>[railway]='tram_stop'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom14;
    <Filter>[amenity]='parking' and [hiking]='yes'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    &maxscale_zoom15;
    <Filter>[natural]='beach'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
  <Rule>
    <Filter>[natural] = 'peak'</Filter>
    &maxscale_zoom14;
    &minscale_zoom16;
    <TextSymbolizer name="name" fontset_name="book-fonts" size="10"
      fill="black" dy="5" halo_radius="1"/>
  </Rule>
  <Rule>
    <Filter>[natural] = 'peak' and not [name] != ''</Filter>
    &maxscale_zoom14;
    &minscale_zoom16;
    <TextSymbolizer name="ele" fontset_name="oblique-fonts" size="9"
      fill="&grey50;" dy="6" halo_radius="1"/>
  </Rule>
  <Rule>
    <Filter>[natural] = 'peak' and [name] != ''</Filter>
    &maxscale_zoom14;
    &minscale_zoom16;
    <TextSymbolizer name="ele" fontset_name="oblique-fonts" size="9"
      fill="&grey50;" dy="16" halo_radius="1"/>
  </Rule>
  <Rule>
    <Filter>[natural] = 'cave_entrance'</Filter>
    &maxscale_zoom16;
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1" wrap_width="20" />
  </Rule>
  <Rule>
    &maxscale_zoom17;
    <Filter>[tourism]='information' and [information]='guidepost'</Filter>
    <TextSymbolizer name="name" fontset_name="book-fonts" size="8"
      fill="black" dy="9" halo_radius="1"/>
  </Rule>
</Style>

<Layer name="symbols" status="on" srs="&osm2pgsql_projection;">
  <StyleName>symbols-cabins</StyleName>
  <StyleName>symbols-trailheads</StyleName>
  <StyleName>symbols-eating</StyleName>
  <StyleName>symbols-sights</StyleName>
  <StyleName>symbols-signs</StyleName>
  <StyleName>symbols-landmarks</StyleName>
  <Datasource>
    <Parameter name="table">
    (select *
     from &prefix;_point
     where man_made in ('cairn','tower','mast','survey_point','lighthouse','power_wind','windmill')
        or amenity in ('shelter','cafe','bbq','place_of_worship','parking','bus_station','hunting_stand')
        or historic in ('monument','memorial','ruins','archaeological_site','yes')
        or tourism in ('viewpoint','information','cabin','guest_house','alpine_hut','hostel','hotel','lean_to','picnic_site','basic_hut','wilderness_hut')
        or "natural" in ('peak','cave_entrance','tree','stone','beach')
        or (power='generator' and power_source='wind')
        or highway='bus_stop'
        or railway in ('station','halt','tram_stop')
        or waterway='waterfall'
        or barrier in ('gate','lift_gate','bollard','cycle_barrier','block','chain')
        or leisure in ('picnic_table','firepit')
        or building in ('cabin','lean_to')
    ) as symbols</Parameter>
    &datasource-settings;
  </Datasource>
</Layer>
<Layer name="symbols-poly" status="on" srs="&osm2pgsql_projection;">
  <StyleName>symbols-cabins</StyleName>
  <StyleName>symbols-trailheads</StyleName>
  <StyleName>symbols-eating</StyleName>
  <StyleName>symbols-sights</StyleName>
  <StyleName>symbols-landmarks</StyleName>
  <Datasource>
    <Parameter name="table">
    (select *
     from &prefix;_polygon
     where amenity in ('cafe','place_of_worship','parking','bus_station')
        or "natural"='beach'
        or historic in ('monument','memorial','ruins','archaeological_site')
        or tourism in ('viewpoint','information','cabin','guest_house','alpine_hut','hostel','hotel','lean_to','picnic_site','basic_hut','wilderness_hut')
    ) as symbols</Parameter>
    &datasource-settings;
  </Datasource>
</Layer>

<Layer name="symbols-text" status="on" srs="&osm2pgsql_projection;">
  <StyleName>symbols-text</StyleName>
  <Datasource>
    <Parameter name="table">
    (select way,amenity,tourism,"natural",railway,building,name,ele,operator,service,access,information,hiking,ski,'yes'::text as point
     from &prefix;_point
     where amenity in ('cafe','place_of_worship','parking')
        or tourism in ('information','cabin','guest_house','alpine_hut','hostel','hotel','basic_hut','wilderness_hut')
        or building='cabin'
        or "natural" in ('peak','beach','cave_entrance')
        or railway in ('station','halt','tram_stop')
    ) as text</Parameter>
    &datasource-settings;
  </Datasource>
</Layer>
<Layer name="symbols-text-poly" status="on" srs="&osm2pgsql_projection;">
  <StyleName>symbols-text</StyleName>
  <Datasource>
    <Parameter name="table">
    (select way,amenity,tourism,"natural",railway,building,name,NULL as ele,operator,service,access,information,hiking,ski,'no'::text as point
     from &prefix;_polygon
     where amenity in ('cafe','place_of_worship','parking')
        or tourism in ('cabin','guest_house','alpine_hut','hostel','hotel','basic_hut','wilderness_hut')
        or building='cabin'
        or "natural"='beach'
    ) as text</Parameter>
    &datasource-settings;
  </Datasource>
</Layer>
